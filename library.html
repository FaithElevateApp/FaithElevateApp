<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Faith Elevate App</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="styles.css"/>
  <style>
    .progress-section {
      margin: 18px 0 10px 0;
      background: rgba(30,41,59,0.7);
      border-radius: 10px;
      padding: 12px 10px;
      font-size: 0.98em;
    }
    .progress-slider, .reflect-slider {
      width: 70%;
      margin: 0 10px 10px 0;
      accent-color: #38bdf8;
    }
    .progress-value, .reflect-value, .overall-progress {
      font-weight: bold;
      color: #38bdf8;
      margin-left: 8px;
    }
    .overall-progress-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .progress-circle {
      transform: rotate(-90deg);
    }
    .progress-bg {
      stroke: #334155;
    }
    .progress-bar {
      transition: stroke-dashoffset 0.5s ease-in-out;
    }
    .overall-progress-horizontal-wrapper {
      width: 100%;
      background: #334155;
      border-radius: 5px;
      overflow: hidden;
      position: relative;
      height: 24px;
      margin-top: 8px;
    }
    .progress-bar-container {
      display: flex;
      align-items: center;
      height: 100%;
    }
    .progress-bar-bg {
      flex: 1;
      background: #16213a;
      border-radius: 5px;
      height: 100%;
    }
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #38bdf8, #0ea5e9);
      border-radius: 5px;
      transition: width 0.5s ease-in-out;
    }
    .progress-bar-text {
      position: absolute;
      right: 10px;
      font-size: 0.9em;
      color: #38bdf8;
      font-weight: bold;
    }
  </style>
</head>

<body>
 <header>
    <h1>Faith Elevate</h1>
    <nav>
      <ul>
        <li><a href="index.html" onclick="showPage('home')">Home</a></li>
        <li><a href="#" onclick="showPage('features')">Features</a></li>
        <li><a href="#" onclick="showPage('contact')">Contact</a></li>
      </ul>
    </nav>
  </header>

  <div class="dashboard-panel">
    <a href="Home.html" class="dashboard-icon" tabindex="0" style="text-decoration:none;">
      <i class="fa-solid fa-calendar-check"></i>
      <span class="dashboard-label">Daily Challenges</span>
    </a>
    <a href="library.html" class="dashboard-icon" tabindex="0" style="text-decoration:none;">
      <i class="fa-solid fa-book-open"></i>
      <span class="dashboard-label">Challenge Library</span>
    </a>
    <a href="progress.html" class="dashboard-icon" tabindex="0" style="text-decoration:none;">
      <i class="fa-solid fa-chart-line"></i>
      <span class="dashboard-label">Progress Tracker & Streaks</span>
    </a>
    <a href="reflections.html" class="dashboard-icon" tabindex="0" style="text-decoration:none;">
      <i class="fa-solid fa-pen-fancy"></i>
      <span class="dashboard-label">Reflections</span>
    </a>
    <a href="VOD.html" class="dashboard-icon" tabindex="0" style="text-decoration:none;">
      <i class="fa-solid fa-bible"></i>
      <span class="dashboard-label">Verse of the Day & Meditation</span>
    </a>
   
    <a href="chalShare.html" class="dashboard-icon" tabindex="0" style="text-decoration:none;">
      <i class="fa-solid fa-share-nodes"></i>
      <span class="dashboard-label">Challenge Sharing</span>
    </a>
    <a href="custom.html" class="dashboard-icon" tabindex="0" style="text-decoration:none;">
      <i class="fa-solid fa-wand-magic-sparkles"></i>
      <span class="dashboard-label">Custom Challenge Creator</span>
    </a>
    <a href="archive.html" class="dashboard-icon" tabindex="0" style="text-decoration:none;">
      <i class="fa-solid fa-trophy"></i>
      <span class="dashboard-label">Achievements & Rewards</span>
    </a>
   
  </div>

  <!-- Challenge Notes Section under Dashboard -->
  <div class="dashboard-notes-wrapper" style="margin: 30px auto 20px auto; max-width: 950px;">
    <section id="challenge-notes-section" style="background: #16213a; border-radius: 10px; padding: 18px 20px;">
      <h2 style="color:#38bdf8;">My Challenge Notes</h2>
      <table style="width:100%; border-collapse:collapse; background:#1e293b; color:#f8fafc;">
        <thead>
          <tr style="background:#334155;">
            <th style="padding:8px; border-radius:6px 0 0 6px;">Date</th>
            <th style="padding:8px;">Challenge</th>
            <th style="padding:8px;">My Note / What God Communicated</th>
            <th style="padding:8px; border-radius:0 6px 6px 0;">Action</th>
          </tr>
        </thead>
        <tbody id="notes-table-body">
          <!-- Notes rows will be injected here -->
        </tbody>
        <tfoot>
          <tr>
            <td>
              <input type="date" id="note-date" style="width:100%;background:#0f172a;color:#f8fafc;border:1px solid #334155;border-radius:4px;padding:6px;">
            </td>
            <td>
              <select id="note-challenge" style="width:100%;background:#0f172a;color:#f8fafc;border:1px solid #334155;border-radius:4px;padding:6px;">
                <!-- Challenge options will be injected here -->
              </select>
            </td>
            <td>
              <input type="text" id="note-content" placeholder="Write your note here..." style="width:100%;background:#0f172a;color:#f8fafc;border:1px solid #334155;border-radius:4px;padding:6px;">
            </td>
            <td>
              <button id="add-note-btn" style="background:#38bdf8;color:#0f172a;font-weight:bold;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;">Add Note</button>
            </td>
          </tr>
        </tfoot>
      </table>
      <div id="notes-export-section" style="margin-top:18px;display:none;">
        <button id="export-notes-btn" style="background:#0ea5e9;color:#fff;border:none;padding:8px 18px;border-radius:6px;cursor:pointer;">Export All Notes</button>
      </div>
    </section>
  </div>

  <h1>Challenge Library</h1>
  <div class="challenge-list" id="challenge-list"></div>
  <script>
    const challenges = [
      {
        name: "Seeking God’s Will Challenge",
        purpose: "To actively seek God's direction in your daily life, making Him the ultimate guide for all your decisions, big and small.",
        benefit: "Trying this challenge can bring **clarity amidst confusion**, **peace in uncertainty**, and a deeper **intimacy with God** as you learn to listen for His voice and trust His perfect plan for your life. You'll experience less anxiety and more divine alignment.",
        scriptures: [
          {
            ref: "Proverbs 3:5-6",
            text: "Trust in the Lord with all your heart and lean not on your own understanding; in all your ways submit to him, and he will make your paths straight.",
            alignment: "This foundational verse teaches us to surrender our understanding to God, promising His direct guidance when we acknowledge Him in all things."
          },
          {
            ref: "Romans 12:2",
            text: "Do not conform to the pattern of this world, but be transformed by the renewing of your mind. Then you will be able to test and approve what God’s will is—his good, pleasing and perfect will.",
            alignment: "To know God's will, our minds must be transformed. This challenge helps you intentionally renew your mind with God's truth."
          },
          {
            ref: "Jeremiah 29:11",
            text: "“For I know the plans I have for you,” declares the Lord, “plans to prosper you and not to harm you, plans to give you hope and a future.”",
            alignment: "This verse assures us that God's will is always for our good, providing the foundation of trust needed to seek His direction without fear."
          }
        ],
        practice: [
          "Start every day asking God to guide your decisions, no matter how small.",
          "Before making any significant decision, pause and pray: 'Lord, what would You have me do? Lead me.'",
          "Keep a daily record of: The decision you brought before God, how you felt led (through Scripture, peace, godly counsel), the action you took, and how it turned out.",
          "Seek counsel from godly mentors or trusted spiritual friends when faced with difficult choices."
        ],
        reflection: [
          "What decision did I bring to God today?",
          "Did I wait for His direction or rush ahead?",
          "What was His answer or impression?",
          "What was the result of following (or not following) His leading?"
        ]
      },
      {
        name: "Daily Gratitude Challenge",
        purpose: "To cultivate a heart of continuous thankfulness, recognizing God's blessings in every circumstance, transforming your perspective from scarcity to abundance.",
        benefit: "Embracing gratitude can dramatically **reduce stress**, **improve mental well-being**, **deepen your joy**, and strengthen your **faith in God's provision**. You'll begin to see miracles in the mundane.",
        scriptures: [
          {
            ref: "1 Thessalonians 5:18",
            text: "give thanks in all circumstances; for this is God’s will for you in Christ Jesus.",
            alignment: "This command calls us to thankfulness regardless of situation, a central practice of this challenge."
          },
          {
            ref: "Psalm 136:1",
            text: "Give thanks to the Lord, for he is good. His love endures forever.",
            alignment: "A reminder of God's unchanging goodness and enduring love, which are always reasons for gratitude."
          }
        ],
        practice: [
          "Write down at least 3 new things you're genuinely grateful for every day in your journal.",
          "Verbally thank God for these things in prayer, elaborating on why you're thankful.",
          "Express gratitude to at least one person in your life each day."
        ],
        reflection: [
          "Did you notice a shift in your mood and mindset as you practiced gratitude?",
          "What unexpected blessings did you discover today?",
          "How did expressing gratitude to others impact your relationships?"
        ]
      },
      {
        name: "Prayer Discipline Challenge",
        purpose: "To establish a consistent, focused prayer life, moving beyond sporadic requests to a deep, meaningful communion with God.",
        benefit: "This challenge will unlock **greater spiritual power**, **deeper intimacy with God**, **increased peace**, and **clearer direction** in your life. Your petitions will become more fervent, and your spirit more attuned to His.",
        scriptures: [
          {
            ref: "Matthew 6:6",
            text: "But when you pray, go into your room, close the door and pray to your Father, who is unseen. Then your Father, who sees what is done in secret, will reward you.",
            alignment: "Jesus Himself teaches the importance of private, focused prayer, which this challenge aims to cultivate."
          },
          {
            ref: "Philippians 4:6",
            text: "Do not be anxious about anything, but in every situation, by prayer and petition, with thanksgiving, present your requests to God.",
            alignment: "A powerful promise that through prayer, we can overcome anxiety and bring all our needs to God."
          }
        ],
        practice: [
          "Commit to 10-15 minutes of focused, uninterrupted prayer daily at a set time.",
          "Use the ACTS model (Adoration, Confession, Thanksgiving, Supplication) to structure your prayers.",
          "Keep a prayer journal to record your prayers and God's answers."
        ],
        reflection: [
          "Was your prayer consistent today, and did it feel more intimate?",
          "What anxieties did you release through prayer?",
          "Did you notice any specific answers to your prayers?"
        ]
      },
      {
        name: "Scripture Memorization Challenge",
        purpose: "To hide God's Word in your heart, making it a constant companion and guide for your thoughts and actions.",
        benefit: "Memorizing Scripture provides **spiritual strength**, acts as a **defense against temptation**, offers **comfort in distress**, and **equips you for ministry**. You'll find yourself able to draw on truth instantly.",
        scriptures: [
          {
            ref: "Psalm 119:11",
            text: "I have hidden your word in my heart that I might not sin against you.",
            alignment: "The Psalmist's declaration highlights the protective power of internalized Scripture against sin."
          },
          {
            ref: "Joshua 1:8",
            text: "Keep this Book of the Law always on your lips; meditate on it day and night, so that you may be careful to do everything written in it. Then you will be prosperous and successful.",
            alignment: "This verse connects meditation on God's Word (which includes memorization) with success and obedience."
          }
        ],
        practice: [
          "Choose one key verse per week to memorize and recite it daily.",
          "Use flashcards, apps, or write the verse out repeatedly to aid memorization.",
          "Meditate on the meaning of the verse and pray it back to God."
        ],
        reflection: [
          "Did memorizing Scripture influence your thoughts or actions today?",
          "How did this verse bring you comfort or guidance?",
          "Was there a moment today where the memorized verse came to mind at just the right time?"
        ]
      },
      {
        name: "Forgiveness Challenge",
        purpose: "To release the burden of resentment and bitterness by extending God's grace to those who have wronged you, and to yourself.",
        benefit: "Undertaking this challenge brings **inner peace**, **emotional healing**, **freedom from bitterness**, and the ability to **experience God's forgiveness more fully** in your own life. It's a key to unlocking spiritual breakthroughs.",
        scriptures: [
          {
            ref: "Ephesians 4:32",
            text: "Be kind and compassionate to one another, forgiving each other, just as in Christ God forgave you.",
            alignment: "This verse models God's forgiveness as the standard for our own, emphasizing its compassionate nature."
          },
          {
            ref: "Matthew 6:14-15",
            text: "For if you forgive other people when they sin against you, your heavenly Father will also forgive you. But if you do not forgive others their sins, your Father will not forgive your sins.",
            alignment: "Jesus clearly links our forgiveness of others to receiving God's forgiveness, making it a crucial spiritual discipline."
          }
        ],
        practice: [
          "Identify someone you need to forgive (this can include yourself).",
          "Pray for them, asking God to help you release resentment.",
          "Write a letter of forgiveness (you don't have to send it) expressing how you felt and choosing to forgive.",
          "When feelings of bitterness arise, remind yourself of God's forgiveness towards you."
        ],
        reflection: [
          "What changed in your heart during the forgiveness process today?",
          "Was it difficult to extend grace, and what spiritual battle did you face?",
          "How does understanding God's forgiveness for you impact your ability to forgive others?"
        ]
      },
      {
        name: "Love in Action Challenge",
        purpose: "To embody Christ's selfless love by actively serving others without expectation of reward, reflecting His heart to the world.",
        benefit: "Participating in this challenge deepens your **compassion**, reveals **opportunities for ministry**, brings **joy in giving**, and strengthens your **connection to God's heart for humanity**. You'll see God's love flow through you.",
        scriptures: [
          {
            ref: "1 Corinthians 13:4-7",
            text: "Love is patient, love is kind. It does not envy, it does not boast, it is not proud... It always protects, always trusts, always hopes, always perseveres.",
            alignment: "This well-known passage defines the very nature of active love that this challenge aims to cultivate."
          },
          {
            ref: "John 13:34-35",
            text: "“A new command I give you: Love one another. As I have loved you, so you must love one another. By this everyone will know that you are my disciples, if you love one another.”",
            alignment: "Jesus makes loving action a distinguishing mark of His disciples, a direct call to this challenge."
          }
        ],
        practice: [
          "Do one selfless act of love each day for someone, expecting absolutely no reward or recognition.",
          "Look for practical needs you can meet for family, friends, or strangers.",
          "Pray for opportunities to show God's love to those around you."
        ],
        reflection: [
          "How hard was it to act selflessly today, and what did God teach you through it?",
          "How did your act of love impact the other person (or did it remain unnoticed)?",
          "Did you feel God's presence more strongly as you served?"
        ]
      },
      {
        name: "Humility and Servanthood Challenge",
        purpose: "To embrace a spirit of humility and selfless service, following Christ's example of laying down His life for others.",
        benefit: "This challenge will break down pride, foster a **genuinely humble heart**, **increase your capacity for empathy**, and **open doors for God to use you** in powerful ways. You'll find true strength in surrender.",
        scriptures: [
          {
            ref: "Philippians 2:3-4",
            text: "Do nothing out of selfish ambition or vain conceit. Rather, in humility value others above yourselves, not looking to your own interests but each of you to the interests of the others.",
            alignment: "Paul's instruction on valuing others above ourselves is the core of this challenge."
          },
          {
            ref: "Mark 10:45",
            text: "For even the Son of Man did not come to be served, but to serve, and to give his life as a ransom for many.",
            alignment: "Jesus Himself provides the ultimate example of servanthood, inspiring us to follow His path."
          }
        ],
        practice: [
          "Identify one humble task you can do daily that no one expects you to do (e.g., cleaning up something you didn't mess up, assisting someone without being asked).",
          "Serve someone anonymously.",
          "Pray for humility, asking God to reveal areas where pride might be hindering your walk."
        ],
        reflection: [
          "Did pride resist your acts of humility today? How did you overcome it?",
          "How did serving others shape your character or perspective?",
          "Did you experience God's presence in a new way through humble service?"
        ]
      },
      {
        name: "Generosity Challenge",
        purpose: "To cultivate a heart that reflects God's boundless generosity, moving beyond scarcity to joyful giving in all areas of life.",
        benefit: "Engaging in generosity unlocks **spiritual blessings**, fosters **trust in God's provision**, **increases your joy**, and **impacts the lives of others** for His glory. You'll discover the truth that it is more blessed to give than to receive.",
        scriptures: [
          {
            ref: "2 Corinthians 9:6-8",
            text: "Remember this: Whoever sows sparingly will also reap sparingly, and whoever sows generously will also reap generously. Each of you should give what you have decided in your heart to give, not reluctantly or under compulsion, for God loves a cheerful giver. And God is able to bless you abundantly, so that in all things at all times, having all that you need, you will abound in every good work.",
            alignment: "This passage beautifully illustrates the principle of generous sowing and reaping, along with God's ability to provide abundantly for cheerful givers."
          },
          {
            ref: "Acts 20:35",
            text: "In everything I did, I showed you that by this kind of hard work we must help the weak, remembering the words the Lord Jesus himself said: ‘It is more blessed to give than to receive.’",
            alignment: "Paul emphasizes Jesus' teaching on the profound blessing found in giving, encouraging us towards selfless action."
          }
        ],
        practice: [
          "Give something daily, whether it's money, time, a listening ear, or genuine encouragement.",
          "Look for opportunities to be generous with your resources, talents, and even your words.",
          "Pray specifically for a generous heart and for opportunities to bless others."
        ],
        reflection: [
          "What did you feel when you gave today without expecting anything in return?",
          "Did you witness God's provision or blessing in an unexpected way?",
          "How did this act of generosity shift your perspective on your own resources?"
        ]
      },
      {
        name: "Faith Over Fear Challenge",
        purpose: "To confront and overcome the strongholds of fear in your life, replacing anxiety and doubt with unwavering trust in God's sovereignty and protection.",
        benefit: "This challenge will equip you with **spiritual courage**, lead to **greater peace of mind**, **increase your reliance on God**, and enable you to **step boldly into His calling** for your life. You'll experience freedom from paralyzing anxieties.",
        scriptures: [
          {
            ref: "Isaiah 41:10",
            text: "So do not fear, for I am with you; do not be dismayed, for I am your God. I will strengthen you and help you; I will uphold you with my righteous right hand.",
            alignment: "A powerful promise from God directly addressing fear, assuring His presence, strength, and help."
          },
          {
            ref: "2 Timothy 1:7",
            text: "For God has not given us a spirit of fear, but of power and of love and of a sound mind.",
            alignment: "This verse directly states that fear is not from God, empowering us to reject it and embrace His gifts of power, love, and a sound mind."
          }
        ],
        practice: [
          "Each time fear creeps in, immediately counter it with prayer and a chosen scripture verse (like Isaiah 41:10).",
          "Identify one specific fear you're struggling with and surrender it to God daily.",
          "Act in faith despite your fears, taking small steps of obedience even when uncomfortable."
        ],
        reflection: [
          "How often did fear try to take over your thoughts today? How did faith respond?",
          "What specific situation did you hand over to God in faith?",
          "Did you feel a sense of peace or strength after actively choosing faith over fear?"
        ]
      },
      {
        name: "Bible in a Month Challenge (Short Books)",
        purpose: "To immerse yourself in the living Word of God, gaining a broader understanding of His narrative and character through rapid reading of shorter books.",
        benefit: "This challenge will **accelerate your biblical literacy**, provide **fresh revelation**, **strengthen your faith**, and **equip you with God's truth** for daily living. You'll see the bigger picture of God's story.",
        scriptures: [
          {
            ref: "2 Timothy 3:16-17",
            text: "All Scripture is God-breathed and is useful for teaching, rebuking, correcting and training in righteousness, so that the servant of God may be thoroughly equipped for every good work.",
            alignment: "This verse underscores the power and purpose of all Scripture, motivating us to immerse ourselves in it for spiritual equipping."
          }
        ],
        practice: [
          "Commit to reading one short book of the Bible per day (e.g., Philippians, Colossians, Ruth, Jonah, James, Jude, 1-3 John).",
          "Before reading, pray for understanding and revelation.",
          "After reading, jot down key themes, new insights, or verses that stood out to you."
        ],
        reflection: [
          "Which themes stood out in your reading today?",
          "What new insight about God's character or plan did you gain?",
          "How did today's reading challenge or affirm your understanding of faith?"
        ]
      },
      {
        name: "Sabbath Rest Challenge",
        purpose: "To honor God's design for rest and renewal, intentionally setting aside time each week to cease from labor, worship, and commune with Him.",
        benefit: "Observing Sabbath rest leads to **physical and mental rejuvenation**, **spiritual refreshment**, **deeper trust in God's provision**, and a **healthier rhythm of life**. You'll find true peace in His presence.",
        scriptures: [
          {
            ref: "Exodus 20:8-11",
            text: "“Remember the Sabbath day by keeping it holy. Six days you shall labor and do all your work, but the seventh day is a sabbath to the Lord your God. On it you shall not do any work… For in six days the Lord made the heavens and the earth, the sea, and all that is in them, but he rested on the seventh day. Therefore the Lord blessed the Sabbath day and made it holy.”",
            alignment: "This is the Fourth Commandment, a foundational instruction for setting aside a day of rest, rooted in God's own example."
          },
          {
            ref: "Matthew 11:28-30",
            text: "“Come to me, all you who are weary and burdened, and I will give you rest. Take my yoke upon you and learn from me, for I am gentle and humble in heart, and you will find rest for your souls. For my yoke is easy and my burden is light.”",
            alignment: "Jesus invites us to find true rest in Him, which complements the physical rest of the Sabbath by offering spiritual solace."
          }
        ],
        practice: [
          "Set aside one full day (24 hours) each week for intentional rest from work and obligations.",
          "Dedicate this time to worship, prayer, reflection, and activities that refresh your soul.",
          "Avoid distractions like excessive screen time or errands; focus on spiritual and relational connection."
        ],
        reflection: [
          "Did you feel truly renewed or restless during your Sabbath time today?",
          "What distractions did you have to lay aside to fully embrace rest?",
          "How did this time of rest impact your perspective for the week ahead?"
        ]
      },
      {
        name: "Bold Witnessing Challenge",
        purpose: "To courageously share your faith and the good news of Jesus Christ with those around you, allowing God to use you as a vessel of His truth.",
        benefit: "This challenge will **strengthen your conviction**, **increase your confidence in sharing the Gospel**, lead to **divine appointments**, and bring **joy in seeing lives impacted** for eternity. You'll become a powerful voice for Christ.",
        scriptures: [
          {
            ref: "Romans 1:16",
            text: "For I am not ashamed of the gospel, because it is the power of God that brings salvation to everyone who believes: first to the Jew, then to the Gentile.",
            alignment: "Paul's bold declaration inspires us to overcome any shame and embrace the power of the Gospel."
          },
          {
            ref: "Matthew 28:19-20",
            text: "Therefore go and make disciples of all nations, baptizing them in the name of the Father and of the Son and of the Holy Spirit, and teaching them to obey everything I have commanded you. And surely I am with you always, to the very end of the age.",
            alignment: "The Great Commission, Jesus' direct command to His followers to go and make disciples, is the ultimate motivation for witnessing."
          }
        ],
        practice: [
          "Share your faith at least once a week, whether through a direct conversation, a thoughtful post on social media, or a tangible act of service that opens doors for discussion.",
          "Pray for opportunities to witness and for God to soften hearts.",
          "Be prepared to share a simple testimony of what God has done in your life."
        ],
        reflection: [
          "Were you afraid or hesitant to share your faith today? How did you overcome it?",
          "What was the response to your witness, and what did you learn from it?",
          "Did you feel God's presence empowering you as you shared?"
        ]
      },
      {
        name: "Fasting for Focus Challenge",
        purpose: "To intentionally deny a physical or sensory pleasure (like food, social media, or entertainment) to heighten your spiritual sensitivity and focus on God.",
        benefit: "Fasting can bring **spiritual breakthroughs**, **increased clarity and discernment**, a **deeper sense of God's presence**, and **greater discipline** in your walk. You'll shift your appetite from worldly desires to heavenly ones.",
        scriptures: [
          {
            ref: "Matthew 6:16-18",
            text: "“When you fast, do not look somber as the hypocrites do, for they disfigure their faces to show others they are fasting. Truly I tell you, they have received their reward in full. But when you fast, put oil on your head and wash your face, so that it will not be obvious to others that you are fasting, but only to your Father, who is unseen; and your Father, who sees what is done in secret, will reward you.”",
            alignment: "Jesus instructs on the proper heart attitude for fasting – a private act of devotion to God, not for human recognition."
          },
          {
            ref: "Isaiah 58:6",
            text: "“Is not this the kind of fasting I have chosen: to loose the chains of injustice and untie the cords of the yoke, to set the oppressed free and break every yoke?”",
            alignment: "This verse describes a spiritual fasting that leads to tangible acts of justice and liberation, showing the transformative power of genuine fasting."
          }
        ],
        practice: [
          "Choose a specific distraction to fast from (e.g., social media, a particular food, television) for a set period each day or week.",
          "Intentionally use the time and energy saved from your fast to engage in prayer, Bible study, or service.",
          "Approach fasting with a humble heart, seeking God's will and purpose, not just self-denial."
        ],
        reflection: [
          "Did you gain clarity or a new perspective during your fast today?",
          "What spiritual insights did you receive?",
          "How did fasting help you redirect your focus from earthly desires to heavenly ones?"
        ]
      },
      {
        name: "Taming the Tongue Challenge",
        purpose: "To bring your words into alignment with Christ's character, speaking life, grace, and truth, rather than gossip, negativity, or harshness.",
        benefit: "Mastering your tongue will **transform your relationships**, cultivate **inner peace**, **demonstrate spiritual maturity**, and **bring glory to God**. You'll become a conduit of blessing through your speech.",
        scriptures: [
          {
            ref: "James 1:19",
            text: "My dear brothers and sisters, take note of this: Everyone should be quick to listen, slow to speak and slow to become angry.",
            alignment: "James provides foundational wisdom for controlling the tongue: prioritize listening and thoughtful speech."
          },
          {
            ref: "Proverbs 15:1",
            text: "A gentle answer turns away wrath, but a harsh word stirs up anger.",
            alignment: "This proverb highlights the profound impact of our words on others and the power of a gentle response."
          }
        ],
        practice: [
          "Before responding to others, pause and consider: 'Is this kind? Is this necessary? Is this true?'",
          "Actively avoid gossip, complaining, and harsh words throughout the day.",
          "Make a conscious effort to speak words of encouragement, affirmation, and blessing to those around you."
        ],
        reflection: [
          "How did your speech reflect Christ today? Were there moments you caught yourself before speaking unwisely?",
          "What was the impact of your words on others?",
          "Did practicing restraint bring you a greater sense of peace or control?"
        ]
      },
      {
        name: "Worship First Challenge",
        purpose: "To establish a daily habit of beginning your day by actively adoring God, setting a tone of praise and gratitude for everything that follows.",
        benefit: "Starting your day with worship **shifts your focus to God**, **sets a positive spiritual tone**, **invites His presence**, and **equips you to face challenges with joy**. You'll experience more spiritual resilience.",
        scriptures: [
          {
            ref: "Psalm 100:1-5",
            text: "Shout for joy to the Lord, all the earth. Worship the Lord with gladness; come before him with joyful songs. Know that the Lord is God. It is he who made us, and we are his; we are his people, the sheep of his pasture. Enter his gates with thanksgiving and his courts with praise; give thanks to him and praise his name. For the Lord is good and his love endures forever; his faithfulness continues through all generations.",
            alignment: "This Psalm is a powerful invitation to enter God's presence with joyful worship, emphasizing His goodness, love, and faithfulness."
          },
          {
            ref: "John 4:24",
            text: "God is spirit, and his worshipers must worship in the Spirit and in truth.”",
            alignment: "Jesus teaches that true worship is a matter of the heart and spirit, accessible to all who seek to honor God genuinely."
          }
        ],
        practice: [
          "Begin each day with a dedicated moment of worship—it could be a worship song, silent adoration, or reading a psalm of praise.",
          "Actively declare God's attributes and express your gratitude to Him before you engage with daily tasks.",
          "Allow this initial act of worship to set the spiritual trajectory for your entire day."
        ],
        reflection: [
          "Did starting with worship shift your day’s tone and perspective?",
          "Were you more aware of God's presence throughout the day?",
          "What specific aspect of God's character did you praise today?"
        ]
      },
      {
        name: "Identity in Christ Challenge",
        purpose: "To deeply internalize and live out the truth of who you are in Christ, shedding old labels and embracing your new, God-given identity.",
        benefit: "Understanding your identity in Christ brings **unshakeable confidence**, **freedom from comparison**, **healing from past wounds**, and the ability to **live boldly in your divine purpose**. You'll walk in true freedom and authority.",
        scriptures: [
          {
            ref: "2 Corinthians 5:17",
            text: "Therefore, if anyone is in Christ, the new creation has come: The old has gone, the new is here!",
            alignment: "This foundational verse declares our complete transformation and new identity when we are in Christ."
          },
          {
            ref: "Galatians 2:20",
            text: "I have been crucified with Christ and I no longer live, but Christ lives in me. The life I now live in the body, I live by faith in the Son of God, who loved me and gave himself for me.",
            alignment: "Paul's profound statement reveals the co-crucifixion and new life in Christ, where His life empowers ours."
          }
        ],
        practice: [
          "Write down and declare one truth about who you are in Christ daily (e.g., 'I am loved,' 'I am chosen,' 'I am redeemed').",
          "When old negative thoughts or labels surface, actively replace them with God's truth about your identity.",
          "Meditate on scriptures that speak to your identity in Christ and pray them over yourself."
        ],
        reflection: [
          "What lies were replaced by God's truth about your identity today?",
          "Did you experience greater freedom or confidence as you affirmed who you are in Christ?",
          "How did understanding your identity in Christ impact your interactions with others?"
        ]
      },
      {
        name: "Patience Challenge",
        purpose: "To develop the fruit of patience, learning to trust God's timing and process in all situations, fostering inner calm amidst delays and frustrations.",
        benefit: "Cultivating patience brings **inner peace**, **reduces anxiety**, **improves relationships**, and **strengthens your trust in God's perfect timing**. You'll learn to wait well and witness God's faithfulness.",
        scriptures: [
          {
            ref: "Galatians 5:22",
            text: "But the fruit of the Spirit is love, joy, peace, forbearance, kindness, goodness, faithfulness, gentleness and self-control.",
            alignment: "Patience (forbearance) is a direct fruit of the Holy Spirit, indicating its divine origin and importance for believers."
          },
          {
            ref: "Ecclesiastes 7:8",
            text: "The end of a matter is better than its beginning, and patience is better than pride.",
            alignment: "This wisdom literature highlights the long-term benefit of patience over impulsive action driven by pride."
          }
        ],
        practice: [
          "Identify moments where you're tempted to be impatient (e.g., in traffic, waiting in line, for a prayer answer).",
          "In that moment, pause, take a deep breath, and pray for patience and trust in God's timing.",
          "Practice active waiting, using moments of delay for prayer, reflection, or simple observation."
        ],
        reflection: [
          "Were you more patient than usual today? What specific situations tested your patience?",
          "What did you learn about yourself or God in those moments of waiting?",
          "Did practicing patience bring you a greater sense of calm or control?"
        ]
      },
      {
        name: "Faith Journal Challenge",
        purpose: "To cultivate a habit of spiritual reflection and documentation, tracking God's work in your life and deepening your understanding of His faithfulness.",
        benefit: "Journaling helps you **process your thoughts and emotions**, **recognize God's hand in your daily life**, **track spiritual growth**, and build a **personal testimony of His faithfulness**. You'll create a powerful record of your journey.",
        scriptures: [
          {
            ref: "Psalm 77:11-12",
            text: "I will remember the deeds of the Lord; yes, I will remember your miracles of long ago. I will consider all your works and meditate on all your mighty deeds.",
            alignment: "The Psalmist models the act of remembering and meditating on God's works, which is central to faith journaling."
          },
          {
            ref: "Habakkuk 2:2",
            text: "Then the Lord replied: “Write down the revelation and make it plain on tablets so that a herald may run with it.”",
            alignment: "God Himself instructs Habakkuk to write down His revelation, emphasizing the importance of recording spiritual insights."
          }
        ],
        practice: [
          "Daily dedicate 5-10 minutes to write in your journal about God's answers to prayer, moments of doubt, spiritual insights, and praises.",
          "Use prompts to guide your reflections, such as 'What did God teach me today?' or 'How did I see God's faithfulness?'",
          "Review past entries periodically to see patterns of growth and God's consistent work in your life."
        ],
        reflection: [
          "Did writing help you process your faith and emotions today?",
          "What specific moment of God's faithfulness or insight did you record?",
          "How does seeing God's hand in your past experiences encourage you for the future?"
        ]
      },
      {
        name: "Obedience Challenge",
        purpose: "To cultivate a heart quick to hear and obey God's voice, trusting that His commands are always for our good and His glory.",
        benefit: "Practicing obedience brings **spiritual blessings**, **deeper communion with God**, **clarity of purpose**, and **freedom from sin's grip**. You'll experience the joy and power of walking in God's will.",
        scriptures: [
          {
            ref: "John 14:15",
            text: "“If you love me, keep my commands.”",
            alignment: "Jesus directly links love for Him with obedience to His commands, making it a foundational aspect of discipleship."
          },
          {
            ref: "James 1:22",
            text: "Do not merely listen to the word, and so deceive yourselves. Do what it says.",
            alignment: "James warns against passive hearing and emphasizes the necessity of actively doing what God's Word instructs."
          }
        ],
        practice: [
          "Each morning, pray: 'Lord, what is one specific thing You are asking of me today?' Listen for His prompting.",
          "Throughout the day, be alert to opportunities to obey small (or large) nudges from the Holy Spirit.",
          "Act promptly on what God reveals, trusting His wisdom over your own understanding."
        ],
        reflection: [
          "What did obedience cost or change in your day today?",
          "Was there a specific command or prompting from God that you followed?",
          "How did you experience God's blessing or presence through your obedience?"
        ]
      },
      {
        name: "Stillness Challenge",
        purpose: "To intentionally quiet your mind and body, creating space to simply be in God's presence, listen for His whisper, and receive His peace.",
        benefit: "Embracing stillness brings **profound peace**, **reduced anxiety**, **increased discernment**, and a **deeper awareness of God's presence**. You'll find soul rest and spiritual clarity.",
        scriptures: [
          {
            ref: "Psalm 46:10",
            text: "He says, “Be still, and know that I am God; I will be exalted among the nations, I will be exalted in the earth.”",
            alignment: "This foundational verse directly calls us to stillness as a prerequisite for knowing God deeply."
          },
          {
            ref: "Lamentations 3:25-26",
            text: "The Lord is good to those whose hope is in him, to the one who seeks him; it is good to wait quietly for the salvation of the Lord.",
            alignment: "This passage connects quiet waiting and hope in God with His goodness and salvation, emphasizing the benefit of stillness."
          }
        ],
        practice: [
          "Spend 10-15 minutes in total stillness daily—no phone, no music, no distractions, just intentional quiet.",
          "Focus on your breath, inviting God's presence, and listening for any gentle promptings or peace.",
          "Resist the urge to fill the silence; allow your mind and spirit to rest in Him."
        ],
        reflection: [
          "Was it uncomfortable or life-giving to be still today? Why?",
          "What thoughts or feelings surfaced during your stillness, and how did you address them?",
          "Did you sense God's presence or receive any peace or insight during this time?"
        ]
      },
      {
        name: "Inquiring of God Challenge",
        purpose: "To develop a consistent habit of seeking God's counsel and wisdom before making any decision, big or small, making Him your ultimate advisor.",
        benefit: "This challenge will equip you with **divine wisdom**, lead to **fewer regrets**, **greater confidence in decision-making**, and a profound sense of **God's involvement in your daily life**. You'll walk in His perfect plan.",
        scriptures: [
          { ref: "1 Samuel 23:2,4", text: "So David inquired of the Lord, saying, “Shall I go and attack these Philistines?” And the Lord said to David, “Go and attack the Philistines and save Keilah.” ... Once again David inquired of the Lord, and the Lord answered him, “Go down to Keilah, for I will give the Philistines into your hand.”", alignment: "David consistently inquired of God before battle, demonstrating a pattern of seeking divine direction for specific actions." },
          { ref: "1 Samuel 30:8", text: "David inquired of the Lord, saying, “Shall I pursue this raiding party? Will I overtake them?” “Pursue them,” he answered. “You will certainly overtake them and succeed in the rescue.”", alignment: "Another instance of David seeking God's specific guidance and receiving a clear answer and promise of success." },
          { ref: "2 Samuel 5:19,23", text: "So David inquired of the Lord, “Shall I go and attack the Philistines?” And the Lord answered him, “Go, for I will surely deliver the Philistines into your hands.” ... Once more David inquired of the Lord, and he answered, “Do not go straight up, but circle around behind them and attack them in front of the poplar trees.”", alignment: "These passages highlight God's specific and varied guidance, sometimes direct attack, sometimes a strategic circling, emphasizing the need to inquire for each unique situation." },
          { ref: "Jeremiah 33:3", text: "‘Call to me and I will answer you and tell you great and unsearchable things you do not know.’", alignment: "A profound invitation from God to call upon Him with the promise of revealing hidden truths." },
          { ref: "James 1:5", text: "If any of you lacks wisdom, you should ask God, who gives generously to all without finding fault, and it will be given to you.", alignment: "A direct promise that God gives wisdom generously to those who ask, making inquiry a simple act of faith." },
          { ref: "Matthew 7:7", text: "“Ask and it will be given to you; seek and you will find; knock and the door will be opened to you.”", alignment: "Jesus' encouragement to persistently ask, seek, and knock, assuring us that God desires to respond." },
          { ref: "Proverbs 3:5–6", text: "Trust in the Lord with all your heart and lean not on your own understanding; in all your ways submit to him, and he will make your paths straight.", alignment: "This foundational wisdom teaches us to yield our intellect to God's and acknowledge Him in every decision for straight paths." },
          { ref: "Isaiah 30:21", text: "Whether you turn to the right or to the left, your ears will hear a voice behind you, saying, “This is the way; walk in it.”", alignment: "A beautiful promise of God's clear directional guidance as we journey with Him." },
          { ref: "Psalm 143:8", text: "Let the morning bring me word of your unfailing love, for I have put my trust in you. Show me the way I should go, for to you I entrust my life.", alignment: "A prayer for morning guidance, expressing trust and surrender, a perfect mindset for inquiring of God." },
          { ref: "Joshua 9:14", text: "The Israelites examined their provisions but did not inquire of the Lord.", alignment: "A cautionary tale illustrating the negative consequences of making decisions without first inquiring of God." },
          { ref: "Psalm 32:8", text: "I will instruct you and teach you in the way you should go; I will counsel you with my loving eye on you.", alignment: "God promises to instruct and teach, guiding us with His personal, loving attention." },
          { ref: "John 16:13", text: "But when he, the Spirit of truth, comes, he will guide you into all the truth. He will not speak on his own; he will speak only what he hears, and he will tell you what is yet to come.", alignment: "Jesus promises the Holy Spirit will guide us into all truth, including revealing God's will and future plans." }
        ],
        practice: [
          "Before making any decision—big or small—pause to pray: 'Lord, what would You have me do? Lead me.'",
          "Keep a daily record of: What decision you brought before God, how you felt led (through Scripture, peace, godly counsel), what action you took, and how it turned out.",
          "At the end of each week, reflect: Did I consistently ask God first? Did I follow His leading or my own? What can I improve?"
        ],
        reflection: [
          "What decision did I bring to God today?",
          "Did I wait for His direction or rush ahead?",
          "What was His answer or impression?",
          "What was the result?"
        ]
      },
      {
        name: "Unlearning & Renewal Challenge",
        purpose: "To intentionally identify and unlearn ungodly habits, beliefs, and thought patterns, replacing them with the truth of God's Word and Christlike behaviors.",
        benefit: "This challenge leads to **spiritual freedom**, **renewed thinking**, and **lasting transformation**. You'll break free from destructive cycles, experience the power of God's truth, and cultivate habits that reflect your new identity in Christ.",
        scriptures: [
          {
            ref: "Romans 12:2",
            text: "Do not conform to the pattern of this world, but be transformed by the renewing of your mind. Then you will be able to test and approve what God’s will is—his good, pleasing and perfect will.",
            alignment: "Renewal of the mind is the key to transformation and discerning God's will, requiring us to let go of worldly patterns."
          },
          {
            ref: "Ephesians 4:22-24",
            text: "You were taught, with regard to your former way of life, to put off your old self, which is being corrupted by its deceitful desires; to be made new in the attitude of your minds; and to put on the new self, created to be like God in true righteousness and holiness.",
            alignment: "Paul instructs believers to actively 'put off' old habits and 'put on' the new self, emphasizing both unlearning and renewal."
          },
          {
            ref: "2 Corinthians 10:4-5",
            text: "The weapons we fight with are not the weapons of the world. On the contrary, they have divine power to demolish strongholds. We demolish arguments and every pretension that sets itself up against the knowledge of God, and we take captive every thought to make it obedient to Christ.",
            alignment: "We are empowered to break mental strongholds and bring every thought into alignment with Christ."
          }
        ],
        practice: [
          "Ask God to reveal any ungodly habits, beliefs, or thought patterns that need to be unlearned.",
          "Identify one specific habit or mindset to address each week.",
          "Replace the old habit with a new, godly practice rooted in Scripture (e.g., replace complaining with gratitude, fear with faith, etc.).",
          "Memorize and meditate on a verse that speaks to your area of renewal.",
          "Journal your progress and pray daily for the Holy Spirit's help in transformation."
        ],
        reflection: [
          "What ungodly habit or thought did I identify today?",
          "How did I intentionally replace it with God's truth or a Christlike action?",
          "What Scripture encouraged me in this process?",
          "Did I notice any changes in my thoughts, feelings, or actions?",
          "How can I continue to walk in renewal tomorrow?"
        ]
      }
      // You can add more challenges here following the new structure
    ];

    // --- Challenge Tracker System ---

    // Helper: Get today's date as YYYY-MM-DD
    function getToday() {
      const d = new Date();
      return d.toISOString().slice(0, 10);
    }

    // Store challenge settings per challenge key
    function startChallenge(key, days) {
      if (!Number.isInteger(days) || days < 1) {
        alert("Please enter a valid number of days (minimum 1).");
        return false;
      }
      localStorage.setItem(`challenge-days-${key}`, days);
      localStorage.setItem(`challenge-start-${key}`, getToday());
      localStorage.setItem(`challenge-completed-${key}`, "0");
      localStorage.setItem(`challenge-reflections-${key}`, JSON.stringify([]));
      return true;
    }

    // Save a reflection for today, only if not already saved
    function saveReflection(key, percent) {
      const today = getToday();
      const reflectionsKey = `challenge-reflections-${key}`;
      let reflections = JSON.parse(localStorage.getItem(reflectionsKey) || "[]");
      if (reflections.find(r => r.date === today)) {
        alert("You have already submitted a reflection for today.");
        return false;
      }
      reflections.push({ date: today, percent: percent });
      localStorage.setItem(reflectionsKey, JSON.stringify(reflections));
      // Update completed days
      localStorage.setItem(`challenge-completed-${key}`, reflections.length);
      alert("Reflection saved! Great job!");
      return true;
    }

    // Calculate and update progress bar
    function updateProgress(key) {
      const totalDays = Number(localStorage.getItem(`challenge-days-${key}`)) || 1;
      const reflections = JSON.parse(localStorage.getItem(`challenge-reflections-${key}`) || "[]");

      // Calculate Total as: Total = sum of (RP * 1/DN) for each reflection
      let total = 0;
      reflections.forEach(r => {
        const RP = Number(r.percent) || 0;
        total += RP * (1 / totalDays);
      });
      // Round and cap at 100
      total = Math.round(total);
      if (total > 100) total = 100;

      // Update progress bar UI
      const progressBarFill = document.getElementById(`progress-bar-fill-${key}`);
      const progressBarText = document.getElementById(`progress-bar-text-${key}`);
      const overallProgress = document.getElementById(`overall-progress-${key}`);
      if (progressBarFill) progressBarFill.style.width = total + "%";
      if (progressBarText) progressBarText.textContent = total + "%";
      if (overallProgress) overallProgress.textContent = total + "%";

     
    }

    // --- UI Integration ---
    const listDiv = document.getElementById('challenge-list');

    challenges.forEach((ch, idx) => {
      const key = ch.name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');

      // Add challenge days input and start button
      const challengeDaysHtml = `
        <div style="margin-bottom:12px;">
          <label>
            Set challenge duration (days): 
            <input type="number" min="1" id="challenge-days-input-${key}" style="width:60px;">
          </label>
          <button type="button" id="start-challenge-btn-${key}" style="margin-left:8px;background:#0ea5e9;color:#fff;border:none;padding:4px 12px;border-radius:4px;cursor:pointer;">Start Challenge</button>
          <span id="challenge-days-status-${key}" style="margin-left:10px;color:#38bdf8;font-weight:bold;"></span>
        </div>
      `;

      // Restart button HTML
      const restartBtnHtml = `
        <button type="button" id="restart-challenge-btn-${key}" style="margin-top:8px;background:#ef4444;color:#fff;border:none;padding:6px 16px;border-radius:6px;cursor:pointer;">
          Restart Challenge
        </button>
      `;

      // Reflection form with single slider and submit
      const reflectionHtml = `
        <form class="reflection-list" id="reflection-form-${key}">
          ${ch.reflection.map((r, i) => `
            <label style="display:block; margin-bottom:8px;">
              ${r}
              <input type="text" name="reflection${idx}_${i}" style="width:100%;margin-top:4px;background:#16213a;color:#f8fafc;border:1px solid #334155;border-radius:4px;padding:6px;">
            </label>
          `).join('')}
          <label style="display:block; margin-bottom:8px;">
            Pray to God and ask Him to show you how you engaged in this challenge. Then, rate your engagement/performance (0-100%):
            <input type="range" min="0" max="100" value="0" id="reflect-${key}" class="reflect-slider">
            <span class="reflect-value" id="reflect-value-${key}">0%</span>
          </label>
          <label style="display:block; margin-bottom:8px;">
            Is there a way you think you did not do right or feel you need to improve?
            <input type="text" name="reflection_improve_${idx}" style="width:100%;margin-top:4px;background:#16213a;color:#f8fafc;border:1px solid #334155;border-radius:4px;padding:6px;">
          </label>
          <button type="submit" class="submit-reflection" style="margin-top:10px;padding:8px 18px;border-radius:6px;background:#38bdf8;color:#0f172a;font-weight:bold;border:none;cursor:pointer;">Submit Reflection</button>
          <div class="reflection-response" id="reflection-response-${key}" style="margin-top:10px;display:none;"></div>
        </form>
      `;

      // Progress HTML (reflection progress only, shown in detail on hover)
      const progressHtml = `
        <div class="progress-section" id="progress-section-${key}" style="display:none;">
          <strong>Overall Progress: <span class="overall-progress" id="overall-progress-${key}">0%</span></strong>
        </div>
      `;

      // Build the detailed content
      let scripturesHtml = ch.scriptures.map(s => `
        <li>
          <strong>${s.ref}</strong>: ${s.text}
          <em>Alignment: ${s.alignment}</em>
        </li>
      `).join('');

      const detail = document.createElement('div');
      detail.className = 'challenge-detail';
      detail.style.display = 'none';
      detail.innerHTML = `
        <h2>${ch.name}</h2>
        ${challengeDaysHtml}
        ${restartBtnHtml}
        <h3>Purpose</h3>
        <p>${ch.purpose}</p>
        <h3>Benefits for a Believer</h3>
        <p>${ch.benefit}</p>
        <h3>Foundational Scriptures</h3>
        <ul class="scripture-list">${scripturesHtml}</ul>
        <h3>Daily Practice Guide</h3>
        <ul>${ch.practice.map(p => `<li>${p}</li>`).join('')}</ul>
        <h3>Reflection Prompts</h3>
        ${reflectionHtml}
        ${progressHtml}
      `;

      // Create button
      const btn = document.createElement('button');
      btn.className = 'challenge-btn';
      btn.type = 'button';

      // Create a modern horizontal progress bar for overall progress
      const overallProgressWrapper = document.createElement('div');
      overallProgressWrapper.className = 'overall-progress-horizontal-wrapper';
      overallProgressWrapper.innerHTML = `
        <div class="progress-bar-container">
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" id="progress-bar-fill-${key}"></div>
          </div>
          <span class="progress-bar-text" id="progress-bar-text-${key}">0%</span>
        </div>
      `;

      btn.innerHTML = `<span>${ch.name}</span>`;
      btn.appendChild(overallProgressWrapper);

      // Show/hide details
      btn.onmouseenter = () => {
        const progDiv = document.getElementById(`progress-section-${key}`);
        if (progDiv) progDiv.style.display = 'block';
      };
      btn.onmouseleave = () => {
        const progDiv = document.getElementById(`progress-section-${key}`);
        if (progDiv) progDiv.style.display = 'none';
      };
      btn.onclick = () => {
        document.querySelectorAll('.challenge-detail').forEach(d => d.style.display = 'none');
        document.querySelectorAll('.challenge-btn').forEach(b => b.classList.remove('active'));
        detail.style.display = '';
        btn.classList.add('active');
      };

      // Append to list
      listDiv.appendChild(btn);
      listDiv.appendChild(detail);

      // --- Dynamic logic for each challenge ---
      setTimeout(() => {
        // Challenge days input
        const daysInput = document.getElementById(`challenge-days-input-${key}`);
        const startBtn = document.getElementById(`start-challenge-btn-${key}`);
        const daysStatus = document.getElementById(`challenge-days-status-${key}`);

        // Load saved days if any
        const savedDays = localStorage.getItem(`challenge-days-${key}`);
        if (savedDays) {
          daysInput.value = savedDays;
          daysStatus.textContent = `Challenge set for ${savedDays} days.`;
        }

        startBtn.onclick = () => {
          const days = parseInt(daysInput.value, 10);
          if (startChallenge(key, days)) {
            daysStatus.textContent = `Challenge set for ${days} days.`;
            updateProgress(key);
          }
        };

        // Reflection slider
        const reflectSlider = document.getElementById(`reflect-${key}`);
        const reflectValue = document.getElementById(`reflect-value-${key}`);
        reflectSlider.addEventListener('input', () => {
          reflectValue.textContent = reflectSlider.value + "%";
        });

        // Load progress on page load
        updateProgress(key);

        // Reflection form submit
        const reflectionForm = document.getElementById(`reflection-form-${key}`);
        const reflectionResponse = document.getElementById(`reflection-response-${key}`);
        reflectionForm.addEventListener('submit', function(e) {
          e.preventDefault();
          // Only allow reflection if challenge started
          const totalDays = Number(localStorage.getItem(`challenge-days-${key}`));
          if (!totalDays) {
            alert("Please start the challenge and set the number of days first.");
            return;
          }
          // Save reflection for today
          const percent = Number(reflectSlider.value);
          if (saveReflection(key, percent)) {
            updateProgress(key);
            reflectionResponse.innerHTML = `<span style="color:#38bdf8;font-weight:bold;">Reflection submitted!</span>`;
            reflectionResponse.style.display = 'block';
            reflectSlider.value = 0;
            reflectValue.textContent = "0%";
            // Only show congrats if challenge is now complete
            const totalDays = Number(localStorage.getItem(`challenge-days-${key}`));
            const reflections = JSON.parse(localStorage.getItem(`challenge-reflections-${key}`) || "[]");
            if (reflections.length >= totalDays) {
              setTimeout(() => {
                alert(`Congratulations! You completed ${reflections.length} out of ${totalDays} days (${Math.round(total)}%) of your challenge!`);
              }, 300);
            }
          }
        });

        // Restart button logic
        const restartBtn = document.getElementById(`restart-challenge-btn-${key}`);
        if (restartBtn) {
          restartBtn.onclick = () => {
            if (confirm("Are you sure you want to restart this challenge? All progress and reflections will be cleared.")) {
              // Remove all localStorage keys for this challenge
              localStorage.removeItem(`challenge-days-${key}`);
              localStorage.removeItem(`challenge-start-${key}`);
              localStorage.removeItem(`challenge-completed-${key}`);
              localStorage.removeItem(`challenge-reflections-${key}`);
              // Optionally reset UI
              daysInput.value = "";
              daysStatus.textContent = "";
              updateProgress(key);
              alert("Challenge has been restarted. Please set your new challenge duration to begin again.");
            }
          };
        }

        // Show congrats if already completed
        updateProgress(key);
      }, 0);
    });

    // --- Challenge Notes System ---
    const notesKey = "challenge-notes";
    function getNotes() {
      return JSON.parse(localStorage.getItem(notesKey) || "[]");
    }
    function saveNotes(notes) {
      localStorage.setItem(notesKey, JSON.stringify(notes));
    }
    function renderNotesTable() {
      const notes = getNotes();
      const tbody = document.getElementById('notes-table-body');
      tbody.innerHTML = "";
      notes.forEach((note, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td style="padding:6px;">${note.date}</td>
          <td style="padding:6px;">${note.challenge}</td>
          <td style="padding:6px;">${note.content}</td>
          <td style="padding:6px;">
            <button onclick="deleteNote(${idx})" style="background:#ef4444;color:#fff;border:none;padding:4px 10px;border-radius:4px;cursor:pointer;">Delete</button>
          </td>
        `;
        tbody.appendChild(tr);
      });
      // Show export button if there are notes
      document.getElementById('notes-export-section').style.display = notes.length ? 'block' : 'none';
    }
    function deleteNote(idx) {
      const notes = getNotes();
      notes.splice(idx, 1);
      saveNotes(notes);
      renderNotesTable();
    }
    window.deleteNote = deleteNote; // Make available globally for inline onclick

    // Populate challenge dropdown
    function populateChallengeDropdown() {
      const select = document.getElementById('note-challenge');
      select.innerHTML = "";
      challenges.forEach(ch => {
        const opt = document.createElement('option');
        opt.value = ch.name;
        opt.textContent = ch.name;
        select.appendChild(opt);
      });
    }

    // Add note event
    document.addEventListener('DOMContentLoaded', function() {
      populateChallengeDropdown();
      renderNotesTable();

      document.getElementById('add-note-btn').onclick = function() {
        const date = document.getElementById('note-date').value || getToday();
        const challenge = document.getElementById('note-challenge').value;
        const content = document.getElementById('note-content').value.trim();
        if (!content) {
          alert("Please write something in your note.");
          return;
        }
        const notes = getNotes();
        notes.push({ date, challenge, content });
        saveNotes(notes);
        renderNotesTable();
        document.getElementById('note-content').value = "";
      };

      // Export notes as text
      document.getElementById('export-notes-btn').onclick = function() {
        const notes = getNotes();
        if (!notes.length) {
          alert("No notes to export.");
          return;
        }
        let text = "My Challenge Notes:\n\n";
        notes.forEach(n => {
          text += `Date: ${n.date}\nChallenge: ${n.challenge}\nNote: ${n.content}\n\n`;
        });
        // Download as .txt file
        const blob = new Blob([text], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = "challenge-notes.txt";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      };
    });
  </script>

    <footer>
    <div class="social-icons">
      <a href="#"><i class="fab fa-facebook-f"></i><span> Facebook</span></a>
      <a href="#"><i class="fab fa-instagram"></i><span> Instagram</span></a>
      <a href="#"><i class="fab fa-twitter"></i><span> Twitter</span></a>
      <a href="#"><i class="fab fa-youtube"></i><span> YouTube</span></a>
    </div>
    <p>&copy; 2025 Faith Elevate. All rights reserved.</p>
  </footer>
</body>
</html>